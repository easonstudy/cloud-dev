webpackJsonp([17],{704:function(e,t,a){a(932);var i=a(52)(a(857),a(956),"data-v-6fa4f377",null);e.exports=i.exports},857:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(149),o=a.n(i),s=a(878);t.default={data:function(){return{loading:!1,users:[],total:0,page:1,limit:10,currentPage:1,editFormVisible:!1,editForm:{id:0,score:""}}},methods:{handleSizeChange:function(e){this.limit=e(),this.search()},handleCurrentChange:function(e){this.page=e,this.search()},handleSearch:function(){this.total=0,this.page=1,this.search()},search:function(){var e=this,t={pageNum:e.page,pageSize:e.limit};e.loading=!0,s.a.findList(t).then(function(t){e.loading=!1,t&&t.data&&(e.total=t.data.total,e.users=t.data.list)},function(t){e.loading=!1,e.$message.error({showClose:!0,message:t.toString(),duration:2e3})}).catch(function(t){e.loading=!1,console.log(t),e.$message.error({showClose:!0,message:"请求出现异常",duration:2e3})})},showEditDialog:function(e,t){this.editFormVisible=!0,this.editForm=o()({},t)},editSubmit:function(){var e=this,t=this;this.$refs.editForm.validate(function(a){if(a){e.loading=!0;var i=o()({},e.editForm);s.a.update(i.id,i).then(function(e){t.loading=!1,e&&0==parseInt(e.errorCode)?(t.$message.success({showClose:!0,message:"修改成功",duration:2e3}),t.$refs.editForm.resetFields(),t.editFormVisible=!1,t.search()):t.$message.error({showClose:!0,message:"修改失败",duration:2e3})},function(e){t.loading=!1,t.$message.error({showClose:!0,message:e.toString(),duration:2e3})}).catch(function(e){t.loading=!1,console.log(e),t.$message.error({showClose:!0,message:"请求出现异常",duration:2e3})})}})}},mounted:function(){this.handleSearch()}}},878:function(e,t,a){"use strict";var i=a(276);t.a={findList:function(e){return i.b("/api/v1/balance/list",e)}}},906:function(e,t,a){t=e.exports=a(700)(),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"list.vue",sourceRoot:""}])},932:function(e,t,a){var i=a(906);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(701)("3129aee1",i,!0)},956:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"warp"},[a("el-col",{staticClass:"warp-breadcrum",attrs:{span:24}},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[a("b",[e._v("首页")])]),e._v(" "),a("el-breadcrumb-item",[e._v("积分管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("积分列表")])],1)],1),e._v(" "),a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"warp-main",attrs:{span:24,"element-loading-text":"拼命加载中"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:e.users,"highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"openId",label:"OpenId",width:"275",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"score",label:"积分",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{width:"100",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.showEditDialog(t.$index,t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"prev, pager, next","page-size":e.limit,total:e.total},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:e.editFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.editFormVisible=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"积分",prop:"score"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.editForm.score,callback:function(t){e.$set(e.editForm,"score",t)},expression:"editForm.score"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.editFormVisible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){e.editSubmit(t)}}},[e._v("提交")])],1)],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=17.46fdbb165cb3a74e6339.js.map