{"version":3,"sources":["webpack:///fms/js/16.2a6a159bdfa46f67c587.js","webpack:///./src/components/score/exchange.vue","webpack:///./src/api/api_gift.js?c386*","webpack:///exchange.vue","webpack:///./src/components/score/exchange.vue?b4ab","webpack:///./src/components/score/exchange.vue?cb09","webpack:///./src/components/score/exchange.vue?833e"],"names":["webpackJsonp","710","module","exports","__webpack_require__","Component","847","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0____","entity","id","type","code","name","score","number","url","isDelete","updateBy","createBy","update","params","remove","findList","searchList","exchange","findExchangeList","data","863","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default","n","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify___default","__WEBPACK_IMPORTED_MODULE_2__api_api_gift__","__WEBPACK_IMPORTED_MODULE_3__api_api_user__","user","userUniqueId","nickName","phone","filters","filterStr","rows","total","page","limit","currentPage","editFormVisible","editForm","userScore","editRules","methods","onSearchSubmit","that","this","$message","error","showClose","message","duration","search","then","result","console","log","undefined","userBalance","err","toString","catch","handleSizeChange","val","handleCurrentChange","pageNum","pageSize","loading","condition","list","showEditDialog","index","row","editTitle","editSubmit","$refs","validate","valid","parseInt","errorCode","success","mounted","890","push","i","version","sources","names","mappings","file","sourcesContent","sourceRoot","916","content","locals","941","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","span","separator","to","path","_v","slot","inline","model","label","placeholder","callback","$$v","$set","expression","on","click","_s","directives","rawName","staticStyle","padding-bottom","element-loading-text","min-width","nativeOn","keyup","$event","_k","keyCode","key","onFilterSubmit","width","stripe","highlight-current-row","prop","sortable","fixed","scopedSlots","_u","fn","scope","plain","size","$index","float","layout","page-size","current-change","title","visible","before-close","editDiaglogClose","close-on-click-modal","update:visible","ref","rules","label-width","auto-complete","staticRenderFns"],"mappings":"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","file":"fms/js/16.2a6a159bdfa46f67c587.js","sourcesContent":["webpackJsonp([16],{\n\n/***/ 710:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(916)\n\nvar Component = __webpack_require__(52)(\n  /* script */\n  __webpack_require__(863),\n  /* template */\n  __webpack_require__(941),\n  /* scopeId */\n  \"data-v-216fa986\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 847:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0____ = __webpack_require__(276);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  entity: {\n    id: 0,\n    type: 0,\n    code: '',\n    name: '',\n    score: 0,\n    number: 0,\n    url: '',\n    isDelete: 0,\n    updateBy: '',\n    createBy: ''\n  },\n\n  update: function update(params) {\n    return __WEBPACK_IMPORTED_MODULE_0____[\"a\" /* POST */]('/api/v1/gift/merge', params);\n  },\n\n  remove: function remove(id) {\n    return __WEBPACK_IMPORTED_MODULE_0____[\"d\" /* DELETE */]('/api/v1/gift/' + id);\n  },\n\n  findList: function findList(params) {\n    return __WEBPACK_IMPORTED_MODULE_0____[\"a\" /* POST */]('/api/v1/gift/list', params);\n  },\n\n  searchList: function searchList(params) {\n    return __WEBPACK_IMPORTED_MODULE_0____[\"a\" /* POST */]('/api/v1/gift/searchList', params);\n  },\n\n  exchange: function exchange(params) {\n    return __WEBPACK_IMPORTED_MODULE_0____[\"f\" /* POST_JSON */]('/api/v1/gift/exchange', params, {});\n  },\n\n  findExchangeList: function findExchangeList(data, params) {\n    return __WEBPACK_IMPORTED_MODULE_0____[\"f\" /* POST_JSON */]('/api/v1/gift/exchange/list', data, params);\n  }\n\n});\n\n/***/ }),\n\n/***/ 863:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__ = __webpack_require__(149);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify__ = __webpack_require__(150);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__api_api_gift__ = __webpack_require__(847);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__api_api_user__ = __webpack_require__(100);\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  data: function data() {\n    return {\n      user: {\n        userUniqueId: '',\n        nickName: '',\n        phone: '',\n        score: ''\n      },\n\n      filters: {\n        filterStr: ''\n      },\n\n      rows: [],\n\n      total: 0,\n      page: 1,\n      limit: 10,\n      currentPage: 1,\n\n      editFormVisible: false,\n      editForm: {\n        userUniqueId: '',\n        userScore: 0,\n        id: 0,\n        code: '',\n        name: '',\n        score: 0,\n        number: 0\n      },\n\n      editRules: {}\n    };\n  },\n\n  methods: {\n    onSearchSubmit: function onSearchSubmit() {\n      var that = this;\n      this.user.nickName = '';\n      this.user.phone = '';\n      this.user.score = '';\n\n      if (that.user.userUniqueId == '') {\n        that.$message.error({ showClose: true, message: '请输入会员信息', duration: 2000 });\n        return;\n      }\n\n      __WEBPACK_IMPORTED_MODULE_3__api_api_user__[\"a\" /* default */].search(that.user.userUniqueId).then(function (result) {\n        console.log(\"search user:\" + __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify___default()(result));\n        if (result == undefined || result == null) {\n          that.$message.error({ showClose: true, message: '未找到该用户', duration: 2000 });\n        } else {\n          that.user.nickName = result.nickName;\n          that.user.phone = result.phone;\n          that.user.score = result.userBalance != null ? result.userBalance.score : 0;\n        }\n      }, function (err) {\n        that.$message.error({ showClose: true, message: err.toString(), duration: 2000 });\n      }).catch(function (error) {\n        that.$message.error({ showClose: true, message: '请求出现异常', duration: 2000 });\n      });\n    },\n\n    handleSizeChange: function handleSizeChange(val) {\n      this.limit = val();\n      this.search();\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.page = val;\n      this.search();\n    },\n\n    search: function search() {\n      var that = this;\n      var params = {\n        pageNum: that.page,\n        pageSize: that.limit\n      };\n      that.loading = true;\n\n      var condition = { filterStr: that.filters.filterStr };\n      params = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()(params, condition);\n\n      console.log(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify___default()(params));\n      __WEBPACK_IMPORTED_MODULE_2__api_api_gift__[\"a\" /* default */].searchList(params).then(function (result) {\n        that.loading = false;\n        if (result && result.data) {\n          that.total = result.data.total;\n          that.rows = result.data.list;\n        }\n      }, function (err) {\n        that.loading = false;\n        that.$message.error({ showClose: true, message: err.toString(), duration: 2000 });\n      }).catch(function (error) {\n        that.loading = false;\n        console.log(error);\n        that.$message.error({ showClose: true, message: '请求出现异常', duration: 2000 });\n      });\n    },\n\n    showEditDialog: function showEditDialog(index, row) {\n      if (row.number == 0) {\n        this.$message({\n          showClose: true,\n          message: '礼品已兑完',\n          type: 'error'\n        });\n        return;\n      }\n      if (this.user.phone == '') {\n        this.$message({\n          showClose: true,\n          message: '请先查找会员',\n          type: 'error'\n        });\n        return;\n      }\n      this.editFormVisible = true;\n      this.editTitle = \"兑换礼品\";\n      this.editForm = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()({}, row);\n      this.editForm.userUniqueId = this.user.phone;\n      this.editForm.userScore = this.user.score;\n      this.editForm.number = 1;\n    },\n    editSubmit: function editSubmit() {\n      var that = this;\n\n      var totalScore = that.editForm.score * that.editForm.number;\n      if (totalScore > that.editForm.userScore) {\n        that.$message.error({ showClose: true, message: '积分不足', duration: 2000 });\n        return;\n      }\n\n      this.$refs.editForm.validate(function (valid) {\n        if (valid) {\n          var params = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_assign___default()({}, that.editForm);\n          __WEBPACK_IMPORTED_MODULE_2__api_api_gift__[\"a\" /* default */].exchange(params).then(function (result) {\n            console.log(\"result:\" + __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_json_stringify___default()(result));\n            if (result && parseInt(result.errorCode) == 0) {\n              that.$message.success({ showClose: true, message: \"兑换成功\", duration: 3000 });\n              that.editFormVisible = false;\n              that.search();\n            }\n          }, function (err) {\n            that.loading = false;\n            that.$message.error({ showClose: true, message: err.toString(), duration: 2000 });\n          }).catch(function (error) {\n            that.loading = false;\n            console.log(error);\n            that.$message.error({ showClose: true, message: '请求出现异常', duration: 2000 });\n          });\n        }\n      });\n    }\n\n  },\n  mounted: function mounted() {}\n});\n\n/***/ }),\n\n/***/ 890:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(700)();\n// imports\n\n\n// module\nexports.push([module.i, \".message[data-v-216fa986]{font-size:18}\", \"\", {\"version\":3,\"sources\":[\"C:/Users/guo/workspace/idea/cloud-dev/member-fms/src/components/score/exchange.vue\"],\"names\":[],\"mappings\":\"AACA,0BACE,YAAa,CACd\",\"file\":\"exchange.vue\",\"sourcesContent\":[\"\\n.message[data-v-216fa986] {\\n  font-size: 18\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 916:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(890);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(701)(\"deedd3de\", content, true);\n\n/***/ }),\n\n/***/ 941:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('el-row', {\n    staticClass: \"warp\"\n  }, [_c('el-col', {\n    staticClass: \"warp-breadcrum\",\n    attrs: {\n      \"span\": 24\n    }\n  }, [_c('el-breadcrumb', {\n    attrs: {\n      \"separator\": \"/\"\n    }\n  }, [_c('el-breadcrumb-item', {\n    attrs: {\n      \"to\": {\n        path: '/'\n      }\n    }\n  }, [_c('b', [_vm._v(\"首页\")])]), _vm._v(\" \"), _c('el-breadcrumb-item', [_vm._v(\"积分管理\")]), _vm._v(\" \"), _c('el-breadcrumb-item', [_vm._v(\"礼品兑换\")])], 1)], 1), _vm._v(\" \"), _c('el-col', {\n    staticClass: \"warp-breadcrum\",\n    attrs: {\n      \"span\": 24\n    }\n  }, [_c('el-col', {\n    attrs: {\n      \"span\": 6\n    }\n  }, [_c('el-card', {\n    staticClass: \"box-card\"\n  }, [_c('div', {\n    staticClass: \"clearfix\",\n    attrs: {\n      \"slot\": \"header\"\n    },\n    slot: \"header\"\n  }, [_c('span', [_vm._v(\"查找会员\")])]), _vm._v(\" \"), _c('el-form', {\n    attrs: {\n      \"inline\": true,\n      \"model\": _vm.user\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"会员\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"placeholder\": \"电话/ID/唯一标记\"\n    },\n    model: {\n      value: (_vm.user.userUniqueId),\n      callback: function($$v) {\n        _vm.$set(_vm.user, \"userUniqueId\", $$v)\n      },\n      expression: \"user.userUniqueId\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', [_c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.onSearchSubmit\n    }\n  }, [_vm._v(\"查找\")])], 1), _vm._v(\" \"), _c('br'), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"昵称:\"\n    }\n  }, [_vm._v(\"\\n            \" + _vm._s(_vm.user.nickName) + \"\\n            \")]), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"电话:\"\n    }\n  }, [_vm._v(\"\\n            \" + _vm._s(_vm.user.phone) + \"\\n            \")]), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"积分:\"\n    }\n  }, [_vm._v(\"\\n            \" + _vm._s(_vm.user.score) + \"\\n            \")])], 1)], 1)], 1), _vm._v(\" \"), _c('el-col', {\n    attrs: {\n      \"span\": 18\n    }\n  }, [_c('el-card', {\n    staticClass: \"box-card\"\n  }, [_c('div', {\n    staticClass: \"clearfix\",\n    attrs: {\n      \"slot\": \"header\"\n    },\n    slot: \"header\"\n  }, [_c('span', [_vm._v(\"查找礼品\")])]), _vm._v(\" \"), _c('div', [_c('el-col', {\n    directives: [{\n      name: \"loading\",\n      rawName: \"v-loading\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"toolbar\",\n    staticStyle: {\n      \"padding-bottom\": \"0px\"\n    },\n    attrs: {\n      \"span\": 24,\n      \"element-loading-text\": \"拼命加载中\"\n    }\n  }, [_c('el-form', {\n    attrs: {\n      \"inline\": true,\n      \"model\": _vm.filters\n    }\n  }, [_c('el-form-item', [_c('el-input', {\n    staticStyle: {\n      \"min-width\": \"240px\"\n    },\n    attrs: {\n      \"placeholder\": \"商品(编号/名称)\"\n    },\n    nativeOn: {\n      \"keyup\": function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13, $event.key)) { return null; }\n        _vm.onFilterSubmit($event)\n      }\n    },\n    model: {\n      value: (_vm.filters.filterStr),\n      callback: function($$v) {\n        _vm.$set(_vm.filters, \"filterStr\", $$v)\n      },\n      expression: \"filters.filterStr\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', [_c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.search\n    }\n  }, [_vm._v(\"查询\")])], 1)], 1), _vm._v(\" \"), _c('el-table', {\n    staticStyle: {\n      \"width\": \"100%\"\n    },\n    attrs: {\n      \"stripe\": \"\",\n      \"data\": _vm.rows,\n      \"highlight-current-row\": \"\"\n    }\n  }, [_c('el-table-column', {\n    attrs: {\n      \"prop\": \"code\",\n      \"label\": \"商品编号\",\n      \"sortable\": \"\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"name\",\n      \"label\": \"商品名称\",\n      \"sortable\": \"\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"score\",\n      \"label\": \"所需积分\",\n      \"sortable\": \"\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"number\",\n      \"label\": \"剩余数量\",\n      \"sortable\": \"\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"fixed\": \"right\",\n      \"label\": \"操作\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('el-button', {\n          attrs: {\n            \"type\": \"primary\",\n            \"plain\": \"\",\n            \"size\": \"small\"\n          },\n          on: {\n            \"click\": function($event) {\n              _vm.showEditDialog(scope.$index, scope.row)\n            }\n          }\n        }, [_vm._v(\"\\n                    兑换\\n                  \")])]\n      }\n    }])\n  })], 1), _vm._v(\" \"), _c('el-col', {\n    staticClass: \"toolbar\",\n    attrs: {\n      \"span\": 24\n    }\n  }, [_c('el-pagination', {\n    staticStyle: {\n      \"float\": \"right\"\n    },\n    attrs: {\n      \"layout\": \"prev, pager, next\",\n      \"page-size\": _vm.limit,\n      \"total\": _vm.total\n    },\n    on: {\n      \"current-change\": _vm.handleCurrentChange\n    }\n  })], 1), _vm._v(\" \"), _c('el-dialog', {\n    attrs: {\n      \"title\": _vm.editTitle,\n      \"visible\": _vm.editFormVisible,\n      \"before-close\": _vm.editDiaglogClose,\n      \"close-on-click-modal\": false\n    },\n    on: {\n      \"update:visible\": function($event) {\n        _vm.editFormVisible = $event\n      }\n    }\n  }, [_c('el-form', {\n    ref: \"editForm\",\n    attrs: {\n      \"model\": _vm.editForm,\n      \"rules\": _vm.editRules,\n      \"label-width\": \"100px\"\n    }\n  }, [_c('el-row', [_c('el-col', {\n    attrs: {\n      \"span\": 12\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"礼品名称:\"\n    }\n  }, [_vm._v(\"\\n                      \" + _vm._s(_vm.editForm.name) + \"\\n                      \")])], 1), _vm._v(\" \"), _c('el-col', {\n    attrs: {\n      \"span\": 12\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"礼品编号:\"\n    }\n  }, [_vm._v(\"\\n                      \" + _vm._s(_vm.editForm.code) + \"\\n                      \")])], 1)], 1), _vm._v(\" \"), _c('el-row', [_c('el-col', {\n    attrs: {\n      \"span\": 12\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"所需积分\"\n    }\n  }, [_vm._v(\"\\n                      \" + _vm._s(_vm.editForm.score) + \"\\n                      \")])], 1)], 1), _vm._v(\" \"), _c('el-row', [_c('el-col', {\n    attrs: {\n      \"span\": 12\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"会员:\",\n      \"prop\": \"userUniqueId\"\n    }\n  }, [_vm._v(\"\\n                      \" + _vm._s(_vm.editForm.userUniqueId) + \"\\n                    \")])], 1), _vm._v(\" \"), _c('el-col', {\n    attrs: {\n      \"span\": 12\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"可用积分:\",\n      \"prop\": \"userScore\"\n    }\n  }, [_vm._v(\"\\n                      \" + _vm._s(_vm.editForm.userScore) + \"\\n                    \")])], 1)], 1), _vm._v(\" \"), _c('el-row', [_c('el-col', {\n    attrs: {\n      \"span\": 12\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"兑换数量\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"type\": \"number\",\n      \"auto-complete\": \"off\"\n    },\n    model: {\n      value: (_vm.editForm.number),\n      callback: function($$v) {\n        _vm.$set(_vm.editForm, \"number\", $$v)\n      },\n      expression: \"editForm.number\"\n    }\n  })], 1)], 1), _vm._v(\" \"), _c('el-col', {\n    attrs: {\n      \"span\": 12\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"总花费积分:\"\n    }\n  }, [_vm._v(\"\\n                      \" + _vm._s(_vm.editForm.number * _vm.editForm.score) + \"\\n                    \")])], 1)], 1), _vm._v(\" \"), _c('el-form-item', [_c('el-button', {\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.editFormVisible = false\n      }\n    }\n  }, [_vm._v(\"取消\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.editSubmit($event)\n      }\n    }\n  }, [_vm._v(\"兑换\")])], 1)], 1)], 1)], 1)], 1)])], 1)], 1)], 1)\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// fms/js/16.2a6a159bdfa46f67c587.js","\n/* styles */\nrequire(\"!!../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-216fa986\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./exchange.vue\")\n\nvar Component = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./exchange.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-216fa986\\\"}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./exchange.vue\"),\n  /* scopeId */\n  \"data-v-216fa986\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/score/exchange.vue\n// module id = 710\n// module chunks = 16","import * as API from './'\n\nexport default {\n  entity: {\n    id: 0,\n    type: 0,\n    code: '',\n    name: '',\n    score: 0,\n    number: 0,\n    url: '',\n    isDelete: 0,\n    updateBy: '',\n    createBy: ''\n  },\n  //新增&修改\n  update: (params) => {\n    return API.POST('/api/v1/gift/merge', params)\n  },\n  //单个删除\n  remove: id => {\n    return API.DELETE(`/api/v1/gift/${id}`)\n  },\n  //查询获取 列表(通过page分页)\n  findList: params => {\n    return API.POST('/api/v1/gift/list', params)\n  },\n\n  //查询获取 列表(通过page分页)\n  searchList: params => {\n    return API.POST('/api/v1/gift/searchList', params)\n  },\n  //兑换礼品\n  exchange: params => {\n    return API.POST_JSON('/api/v1/gift/exchange', params, {})\n  },\n  //兑换礼品历史\n  findExchangeList: (data, params) => {\n    return API.POST_JSON('/api/v1/gift/exchange/list', data, params)\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/api_gift.js","<template>\n  <el-row class=\"warp\">\n    <el-col :span=\"24\" class=\"warp-breadcrum\">\n      <el-breadcrumb separator=\"/\">\n        <el-breadcrumb-item :to=\"{ path: '/' }\"><b>首页</b></el-breadcrumb-item>\n        <el-breadcrumb-item>积分管理</el-breadcrumb-item>\n        <el-breadcrumb-item>礼品兑换</el-breadcrumb-item>\n      </el-breadcrumb>\n    </el-col>\n\n\n    <el-col :span=\"24\" class=\"warp-breadcrum\">\n      <el-col :span=\"6\">\n        <el-card class=\"box-card\">\n          <div slot=\"header\" class=\"clearfix\">\n            <span>查找会员</span>\n          </div>\n          <!-- class=\"learn-form-inline\" -->\n          <el-form :inline=\"true\" :model=\"user\">\n            <el-form-item label=\"会员\">\n              <el-input v-model=\"user.userUniqueId\" placeholder=\"电话/ID/唯一标记\"></el-input>\n            </el-form-item>\n            <el-form-item>\n              <el-button type=\"primary\" @click=\"onSearchSubmit\">查找</el-button>\n            </el-form-item>\n            <br/>\n            <el-form-item label=\"昵称:\">\n              {{user.nickName}}\n              <!--<el-input v-model=\"user.nickName\" disabled></el-input>-->\n            </el-form-item>\n            <el-form-item label=\"电话:\">\n              {{user.phone}}\n              <!--<el-input v-model=\"user.phone\" disabled></el-input>-->\n            </el-form-item>\n            <el-form-item label=\"积分:\">\n              {{user.score}}\n              <!--<el-input v-model=\"user.score\" disabled></el-input>-->\n            </el-form-item>\n          </el-form>\n        </el-card>\n      </el-col>\n      <el-col :span=\"18\">\n        <el-card class=\"box-card\">\n          <div slot=\"header\" class=\"clearfix\">\n            <span>查找礼品</span>\n          </div>\n          <div>\n            <el-col :span=\"24\" class=\"toolbar\" v-loading=\"loading\" style=\"padding-bottom: 0px;\"\n                    element-loading-text=\"拼命加载中\">\n              <!-- 表单 -->\n              <el-form :inline=\"true\" :model=\"filters\">\n                <el-form-item>\n                  <el-input v-model=\"filters.filterStr\" placeholder=\"商品(编号/名称)\" style=\"min-width: 240px;\"\n                            @keyup.enter.native=\"onFilterSubmit\"></el-input>\n                </el-form-item>\n                <el-form-item>\n                  <el-button type=\"primary\" @click=\"search\">查询</el-button>\n                </el-form-item>\n              </el-form>\n\n              <!--列表-->\n              <el-table stripe :data=\"rows\" highlight-current-row style=\"width: 100%;\">\n                <el-table-column prop=\"code\" label=\"商品编号\" sortable>\n                </el-table-column>\n                <el-table-column prop=\"name\" label=\"商品名称\" sortable>\n                </el-table-column>\n                <el-table-column prop=\"score\" label=\"所需积分\" sortable>\n                </el-table-column>\n                <el-table-column prop=\"number\" label=\"剩余数量\" sortable>\n                </el-table-column>\n                <el-table-column fixed=\"right\" label=\"操作\">\n                  <template slot-scope=\"scope\">\n                    <el-button type=\"primary\" plain size=\"small\" @click=\"showEditDialog(scope.$index, scope.row)\">\n                      兑换\n                    </el-button>\n                  </template>\n                </el-table-column>\n              </el-table>\n\n              <!--工具条-->\n              <el-col :span=\"24\" class=\"toolbar\">\n                <el-pagination layout=\"prev, pager, next\" @current-change=\"handleCurrentChange\" :page-size=\"limit\"\n                               :total=\"total\" style=\"float:right;\">\n                </el-pagination>\n              </el-col>\n\n              <!--兑换礼品-->\n              <el-dialog :title=\"editTitle\" :visible.sync=\"editFormVisible\" :before-close=\"editDiaglogClose\"\n                         :close-on-click-modal=\"false\">\n                <el-form :model=\"editForm\" :rules=\"editRules\" label-width=\"100px\" ref=\"editForm\">\n\n                  <el-row>\n                    <el-col :span=\"12\">\n                      <el-form-item label=\"礼品名称:\">\n                        {{editForm.name}}\n                        <!--<el-input v-model=\"editForm.name\" auto-complete=\"off\"></el-input>-->\n                      </el-form-item>\n                    </el-col>\n                    <el-col :span=\"12\">\n                      <el-form-item label=\"礼品编号:\">\n                        {{editForm.code}}\n                        <!--<el-input v-model=\"editForm.code\" auto-complete=\"off\"></el-input>-->\n                      </el-form-item>\n                    </el-col>\n                  </el-row>\n                  <el-row>\n                    <el-col :span=\"12\">\n                      <el-form-item label=\"所需积分\">\n                        {{editForm.score}}\n                        <!--<el-input v-model=\"editForm.score\" readonly auto-complete=\"off\"></el-input>-->\n                      </el-form-item>\n                    </el-col>\n                  </el-row>\n\n                  <el-row>\n                    <el-col :span=\"12\">\n                      <el-form-item label=\"会员:\" prop=\"userUniqueId\">\n                        {{editForm.userUniqueId}}\n                      </el-form-item>\n                    </el-col>\n                    <el-col :span=\"12\">\n                      <el-form-item label=\"可用积分:\" prop=\"userScore\">\n                        {{editForm.userScore}}\n                      </el-form-item>\n                    </el-col>\n                  </el-row>\n                  <el-row>\n                    <el-col :span=\"12\">\n                      <el-form-item label=\"兑换数量\">\n                        <el-input type=\"number\" v-model=\"editForm.number\" auto-complete=\"off\"></el-input>\n                      </el-form-item>\n                    </el-col>\n\n                    <el-col :span=\"12\">\n                      <el-form-item label=\"总花费积分:\">\n                        <!--<el-input v-model=\"editForm.totalScore\" readonly auto-complete=\"off\"></el-input>-->\n                        {{editForm.number * editForm.score}}\n                      </el-form-item>\n                    </el-col>\n                  </el-row>\n\n                  <el-form-item>\n                    <el-button @click.native=\"editFormVisible = false\">取消</el-button>\n                    <el-button type=\"primary\" @click.native=\"editSubmit\">兑换</el-button>\n                  </el-form-item>\n                </el-form>\n              </el-dialog>\n\n\n            </el-col>\n\n          </div>\n        </el-card>\n      </el-col>\n    </el-col>\n\n\n  </el-row>\n</template>\n\n<script>\n  import API from '../../api/api_gift';\n  import API_USER from '../../api/api_user';\n\n  export default {\n    data() {\n      return {\n        //会员\n        user: {\n          userUniqueId: '',\n          nickName: '',\n          phone: '',\n          score: ''\n        },\n\n        //列表 - 查询表单\n        filters: {\n          filterStr: ''\n        },\n\n        //列表 - 集合\n        rows: [],\n        //分页数据\n        total: 0,\n        page: 1,\n        limit: 10,\n        currentPage: 1,\n\n        //编辑相关数据\n        editFormVisible: false,//编辑界面是否显示\n        editForm: {\n          userUniqueId: '',\n          userScore: 0,\n          id: 0,\n          code: '',\n          name: '',\n          score: 0,\n          number: 0\n        },\n\n        editRules: {}\n      }\n    },\n    methods: {\n      onSearchSubmit: function () {\n        let that = this;\n        this.user.nickName = '';\n        this.user.phone = '';\n        this.user.score = '';\n\n        if(that.user.userUniqueId == ''){\n          that.$message.error({showClose: true, message: '请输入会员信息', duration: 2000});\n          return;\n        }\n\n        API_USER.search(that.user.userUniqueId).then(function (result) {\n          console.log(\"search user:\" + JSON.stringify(result));\n          if (result == undefined || result == null) {\n            that.$message.error({showClose: true, message: '未找到该用户', duration: 2000});\n          } else {\n            that.user.nickName = result.nickName;\n            that.user.phone = result.phone;\n            that.user.score = result.userBalance != null ? result.userBalance.score : 0;\n          }\n        }, function (err) {\n          that.$message.error({showClose: true, message: err.toString(), duration: 2000});\n        }).catch(function (error) {\n          that.$message.error({showClose: true, message: '请求出现异常', duration: 2000});\n        });\n      },\n\n\n      handleSizeChange(val) {\n        this.limit = val();\n        this.search();\n      },\n      handleCurrentChange(val) {\n        this.page = val;\n        this.search();\n      },\n      search: function () {\n        let that = this;\n        let params = {\n          pageNum: that.page,\n          pageSize: that.limit\n        };\n        that.loading = true;\n\n        let condition = {filterStr: that.filters.filterStr};\n        params = Object.assign(params, condition);\n\n        console.log(JSON.stringify(params));\n        API.searchList(params).then(function (result) {\n          that.loading = false;\n          if (result && result.data) {\n            that.total = result.data.total;\n            that.rows = result.data.list;\n          }\n        }, function (err) {\n          that.loading = false;\n          that.$message.error({showClose: true, message: err.toString(), duration: 2000});\n        }).catch(function (error) {\n          that.loading = false;\n          console.log(error);\n          that.$message.error({showClose: true, message: '请求出现异常', duration: 2000});\n        });\n      },\n\n      showEditDialog: function (index, row) {\n        if (row.number == 0) {\n          this.$message({\n            showClose: true,\n            message: '礼品已兑完',\n            type: 'error'\n          });\n          return;\n        }\n        if (this.user.phone == '') {\n          this.$message({\n            showClose: true,\n            message: '请先查找会员',\n            type: 'error'\n          });\n          return;\n        }\n        this.editFormVisible = true;\n        this.editTitle = \"兑换礼品\";\n        this.editForm = Object.assign({}, row);\n        this.editForm.userUniqueId = this.user.phone;\n        this.editForm.userScore = this.user.score;\n        this.editForm.number = 1;\n      },\n      editSubmit: function () {\n        let that = this;\n\n        let totalScore = that.editForm.score * that.editForm.number;\n        if (totalScore > that.editForm.userScore) {\n          that.$message.error({showClose: true, message: '积分不足', duration: 2000});\n          return;\n        }\n\n\n        this.$refs.editForm.validate((valid) => {\n          if (valid) {\n            let params = Object.assign({}, that.editForm);\n            API.exchange(params).then(function (result) {\n              console.log(\"result:\" + JSON.stringify(result));\n              if (result && parseInt(result.errorCode) == 0) {\n                that.$message.success({showClose: true, message: \"兑换成功\", duration: 3000});\n                that.editFormVisible = false;\n                that.search();\n              }\n            }, function (err) {\n              that.loading = false;\n              that.$message.error({showClose: true, message: err.toString(), duration: 2000});\n            }).catch(function (error) {\n              that.loading = false;\n              console.log(error);\n              that.$message.error({showClose: true, message: '请求出现异常', duration: 2000});\n            });\n          }\n        })\n      }\n\n    },\n    mounted() {\n\n    }\n  }\n\n</script>\n\n<style scoped>\n  .message {\n    font-size: 18\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// exchange.vue?63f4ad42","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".message[data-v-216fa986]{font-size:18}\", \"\", {\"version\":3,\"sources\":[\"C:/Users/guo/workspace/idea/cloud-dev/member-fms/src/components/score/exchange.vue\"],\"names\":[],\"mappings\":\"AACA,0BACE,YAAa,CACd\",\"file\":\"exchange.vue\",\"sourcesContent\":[\"\\n.message[data-v-216fa986] {\\n  font-size: 18\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-216fa986\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/score/exchange.vue\n// module id = 890\n// module chunks = 16","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-216fa986\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./exchange.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"deedd3de\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-216fa986\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/score/exchange.vue\n// module id = 916\n// module chunks = 16","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('el-row', {\n    staticClass: \"warp\"\n  }, [_c('el-col', {\n    staticClass: \"warp-breadcrum\",\n    attrs: {\n      \"span\": 24\n    }\n  }, [_c('el-breadcrumb', {\n    attrs: {\n      \"separator\": \"/\"\n    }\n  }, [_c('el-breadcrumb-item', {\n    attrs: {\n      \"to\": {\n        path: '/'\n      }\n    }\n  }, [_c('b', [_vm._v(\"首页\")])]), _vm._v(\" \"), _c('el-breadcrumb-item', [_vm._v(\"积分管理\")]), _vm._v(\" \"), _c('el-breadcrumb-item', [_vm._v(\"礼品兑换\")])], 1)], 1), _vm._v(\" \"), _c('el-col', {\n    staticClass: \"warp-breadcrum\",\n    attrs: {\n      \"span\": 24\n    }\n  }, [_c('el-col', {\n    attrs: {\n      \"span\": 6\n    }\n  }, [_c('el-card', {\n    staticClass: \"box-card\"\n  }, [_c('div', {\n    staticClass: \"clearfix\",\n    attrs: {\n      \"slot\": \"header\"\n    },\n    slot: \"header\"\n  }, [_c('span', [_vm._v(\"查找会员\")])]), _vm._v(\" \"), _c('el-form', {\n    attrs: {\n      \"inline\": true,\n      \"model\": _vm.user\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"会员\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"placeholder\": \"电话/ID/唯一标记\"\n    },\n    model: {\n      value: (_vm.user.userUniqueId),\n      callback: function($$v) {\n        _vm.$set(_vm.user, \"userUniqueId\", $$v)\n      },\n      expression: \"user.userUniqueId\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', [_c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.onSearchSubmit\n    }\n  }, [_vm._v(\"查找\")])], 1), _vm._v(\" \"), _c('br'), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"昵称:\"\n    }\n  }, [_vm._v(\"\\n            \" + _vm._s(_vm.user.nickName) + \"\\n            \")]), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"电话:\"\n    }\n  }, [_vm._v(\"\\n            \" + _vm._s(_vm.user.phone) + \"\\n            \")]), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"积分:\"\n    }\n  }, [_vm._v(\"\\n            \" + _vm._s(_vm.user.score) + \"\\n            \")])], 1)], 1)], 1), _vm._v(\" \"), _c('el-col', {\n    attrs: {\n      \"span\": 18\n    }\n  }, [_c('el-card', {\n    staticClass: \"box-card\"\n  }, [_c('div', {\n    staticClass: \"clearfix\",\n    attrs: {\n      \"slot\": \"header\"\n    },\n    slot: \"header\"\n  }, [_c('span', [_vm._v(\"查找礼品\")])]), _vm._v(\" \"), _c('div', [_c('el-col', {\n    directives: [{\n      name: \"loading\",\n      rawName: \"v-loading\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }],\n    staticClass: \"toolbar\",\n    staticStyle: {\n      \"padding-bottom\": \"0px\"\n    },\n    attrs: {\n      \"span\": 24,\n      \"element-loading-text\": \"拼命加载中\"\n    }\n  }, [_c('el-form', {\n    attrs: {\n      \"inline\": true,\n      \"model\": _vm.filters\n    }\n  }, [_c('el-form-item', [_c('el-input', {\n    staticStyle: {\n      \"min-width\": \"240px\"\n    },\n    attrs: {\n      \"placeholder\": \"商品(编号/名称)\"\n    },\n    nativeOn: {\n      \"keyup\": function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13, $event.key)) { return null; }\n        _vm.onFilterSubmit($event)\n      }\n    },\n    model: {\n      value: (_vm.filters.filterStr),\n      callback: function($$v) {\n        _vm.$set(_vm.filters, \"filterStr\", $$v)\n      },\n      expression: \"filters.filterStr\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', [_c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": _vm.search\n    }\n  }, [_vm._v(\"查询\")])], 1)], 1), _vm._v(\" \"), _c('el-table', {\n    staticStyle: {\n      \"width\": \"100%\"\n    },\n    attrs: {\n      \"stripe\": \"\",\n      \"data\": _vm.rows,\n      \"highlight-current-row\": \"\"\n    }\n  }, [_c('el-table-column', {\n    attrs: {\n      \"prop\": \"code\",\n      \"label\": \"商品编号\",\n      \"sortable\": \"\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"name\",\n      \"label\": \"商品名称\",\n      \"sortable\": \"\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"score\",\n      \"label\": \"所需积分\",\n      \"sortable\": \"\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"number\",\n      \"label\": \"剩余数量\",\n      \"sortable\": \"\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"fixed\": \"right\",\n      \"label\": \"操作\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(scope) {\n        return [_c('el-button', {\n          attrs: {\n            \"type\": \"primary\",\n            \"plain\": \"\",\n            \"size\": \"small\"\n          },\n          on: {\n            \"click\": function($event) {\n              _vm.showEditDialog(scope.$index, scope.row)\n            }\n          }\n        }, [_vm._v(\"\\n                    兑换\\n                  \")])]\n      }\n    }])\n  })], 1), _vm._v(\" \"), _c('el-col', {\n    staticClass: \"toolbar\",\n    attrs: {\n      \"span\": 24\n    }\n  }, [_c('el-pagination', {\n    staticStyle: {\n      \"float\": \"right\"\n    },\n    attrs: {\n      \"layout\": \"prev, pager, next\",\n      \"page-size\": _vm.limit,\n      \"total\": _vm.total\n    },\n    on: {\n      \"current-change\": _vm.handleCurrentChange\n    }\n  })], 1), _vm._v(\" \"), _c('el-dialog', {\n    attrs: {\n      \"title\": _vm.editTitle,\n      \"visible\": _vm.editFormVisible,\n      \"before-close\": _vm.editDiaglogClose,\n      \"close-on-click-modal\": false\n    },\n    on: {\n      \"update:visible\": function($event) {\n        _vm.editFormVisible = $event\n      }\n    }\n  }, [_c('el-form', {\n    ref: \"editForm\",\n    attrs: {\n      \"model\": _vm.editForm,\n      \"rules\": _vm.editRules,\n      \"label-width\": \"100px\"\n    }\n  }, [_c('el-row', [_c('el-col', {\n    attrs: {\n      \"span\": 12\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"礼品名称:\"\n    }\n  }, [_vm._v(\"\\n                      \" + _vm._s(_vm.editForm.name) + \"\\n                      \")])], 1), _vm._v(\" \"), _c('el-col', {\n    attrs: {\n      \"span\": 12\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"礼品编号:\"\n    }\n  }, [_vm._v(\"\\n                      \" + _vm._s(_vm.editForm.code) + \"\\n                      \")])], 1)], 1), _vm._v(\" \"), _c('el-row', [_c('el-col', {\n    attrs: {\n      \"span\": 12\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"所需积分\"\n    }\n  }, [_vm._v(\"\\n                      \" + _vm._s(_vm.editForm.score) + \"\\n                      \")])], 1)], 1), _vm._v(\" \"), _c('el-row', [_c('el-col', {\n    attrs: {\n      \"span\": 12\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"会员:\",\n      \"prop\": \"userUniqueId\"\n    }\n  }, [_vm._v(\"\\n                      \" + _vm._s(_vm.editForm.userUniqueId) + \"\\n                    \")])], 1), _vm._v(\" \"), _c('el-col', {\n    attrs: {\n      \"span\": 12\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"可用积分:\",\n      \"prop\": \"userScore\"\n    }\n  }, [_vm._v(\"\\n                      \" + _vm._s(_vm.editForm.userScore) + \"\\n                    \")])], 1)], 1), _vm._v(\" \"), _c('el-row', [_c('el-col', {\n    attrs: {\n      \"span\": 12\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"兑换数量\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"type\": \"number\",\n      \"auto-complete\": \"off\"\n    },\n    model: {\n      value: (_vm.editForm.number),\n      callback: function($$v) {\n        _vm.$set(_vm.editForm, \"number\", $$v)\n      },\n      expression: \"editForm.number\"\n    }\n  })], 1)], 1), _vm._v(\" \"), _c('el-col', {\n    attrs: {\n      \"span\": 12\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"总花费积分:\"\n    }\n  }, [_vm._v(\"\\n                      \" + _vm._s(_vm.editForm.number * _vm.editForm.score) + \"\\n                    \")])], 1)], 1), _vm._v(\" \"), _c('el-form-item', [_c('el-button', {\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.editFormVisible = false\n      }\n    }\n  }, [_vm._v(\"取消\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.editSubmit($event)\n      }\n    }\n  }, [_vm._v(\"兑换\")])], 1)], 1)], 1)], 1)], 1)])], 1)], 1)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-216fa986\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/score/exchange.vue\n// module id = 941\n// module chunks = 16"],"sourceRoot":""}